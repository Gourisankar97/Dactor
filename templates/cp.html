<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Account Info.</title>
    <!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="static/img/icon.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Poppins&display=swap" rel="stylesheet">
    <title>Appoint Doctor</title>
    <link rel="stylesheet" href="static/style.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<style>
#message {
    display:none;
    background: #f1f1f1;
    color: #000;
    position: relative;
    padding: 20px;
    margin-top: 10px;
  }
  #message2 {
    display:none;
    background: #f1f1f1;
    color: #000;
    position: relative;
    padding: 20px;
    margin-top: 10px;
  }
  .match{
      display:none;
  }
  .not_match{
      display: block;
  }
  
  #message p {
    padding: 10px 35px;
    font-size: 18px;
  }
  #message2 p {
    padding: 10px 35px;
    font-size: 18px;
  }
  
  /* Add a green text color and a checkmark when the requirements are right */
  .valid {
    color: green;
  }
  
  .valid:before {
    position: relative;
    left: -35px;
    content: "✔";
  }
  
  /* Add a red text color and an "x" when the requirements are wrong */
  .invalid {
    color: red;
  }
  
  .invalid:before {
    position: relative;
    left: -35px;
    content: "✖";
  }
  </style>

</head>
<body bgcolor="white">
<header>
    <nav>
            <h1><a href="index" style="text-decoration: none; color: white; cursor: pointer;">Dactor</a></h1>
        <ul>
            <li><a class="options" data-target="#dtmodal" data-toggle="modal"> <i class="fa fa-envelope-open fa-1x"></i>&nbsp Write to us.</a> </li>

        </ul>
    </nav>
</header>
<div class="container">
    <div class="row">{% block body %}
        
        <div class="col-md-8 col-sm-8 col-xs-12" style="text-align: center;">
            <div style="margin-top: 40px; text-align: left;">
                <form method="POST" action="new_password">
                    {% csrf_token %}
                    
                    <div style="margin-bottom: 5px; margin-top: 20px;"><label>new password</label></div>
                    <input type="hidden" name="uname" value="{{uname}}">
                    <input required type="password" id="psw" name="npwd" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" style="width: 50%;" class="form-control" placeholder="new password"></input>
                    <div id="message" style="width: 50%;">
                            <p style="font-size: 13px; font-weight: bold;">Password must contain the following:</p >
                            <p id="letter" class="invalid" style="font-size: 13px; font-weight: bold;">A lowercase letter</p>
                            <p id="capital" class="invalid" style="font-size: 13px; font-weight: bold;">A capital (uppercase) letter</p>
                            <p id="number" class="invalid" style="font-size: 13px; font-weight: bold;">A number</p>
                            <p id="length" class="invalid" style="font-size: 13px; font-weight: bold;">Minimum 8 characters</p>
                          </div>
                    <div style="margin-bottom: 5px; margin-top: 20px;"><label>confirm password</label></div>
                    <input required type="password" id="cpsw" name="ncpwd" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" style="width: 50%;" class="form-control" placeholder="confirm password"></input>
                    <div id="message2" style="width: 50%;">
                            <p style="font-size: 13px; font-weight: bold;">Password must contain the following:</p >
                            <p id="letter2" class="invalid" style="font-size: 13px; font-weight: bold;">A lowercase letter</p>
                            <p id="capital2" class="invalid" style="font-size: 13px; font-weight: bold;">A capital (uppercase) letter</p>
                            <p id="number2" class="invalid" style="font-size: 13px; font-weight: bold;">A number</p>
                            <p id="length2" class="invalid" style="font-size: 13px; font-weight: bold;">Minimum 8 characters</p>
                          </div>
                    <div><p id="match" class="not_match" style="color: red; font-size:small; font-weight: bold;">* new password and confirm password must be same</p></div>
                    <div style="margin-bottom: 5px; margin-top: 20px;"></div>
                    <input type="submit" style="width: 30%; font-size: smaller;" class="btn btn-primary" onclick="return password_match()" value="update password">
                 </form>
            
     
            </div>{% endblock %}
            

        </div>
        <div class="col-md-4 col-sm-4 col-xs-12" style="text-align: center;"></div>
        
        
    </div>

<!--Write us modal-->
<div class="modal fade" id="dtmodal"  style="transition: all .5s">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="height: 90px">
                    <h3 class="text-center text-primary">Write to us.
                    <button type="button" class="close " data-dismiss="modal">&times;</button>
                    </h3>

                </div>
                <form id="feedback">
                        {% csrf_token %}
                    <div class="modal-body">
    
                            <div class="form-group">
                                <label style="font-family: Gabriola; font-size: 20px">
                                   <i class="fa fa-user-o"></i>Name
                                </label>
                                <input type="text" required id="name" class="" style=" border: none; border-bottom: 1px solid dimgrey; width: 100%">
                            </div>
                            <div class="form-group">
                                <label style="font-family: Gabriola; font-size: 20px">
                                    <i class="fa fa-envelope-o"></i>Email
                                </label>
                                <input type="text" required id="F_email" class="" style="border: none; border-bottom: 1px solid dimgrey; width: 100%">
                            </div>
                            <div class="form-group">
                                <label style="font-family: Gabriola; font-size: 20px">
                                    <i class="fa fa-pencil"></i>Describe your Query.
                                </label>
                                <textarea required id="feedback_message" class="form-control" style="height: 150px" placeholder="write something..."></textarea>
                            </div>
    
    
                    </div>
                    <div class="modal-footer" style="text-align: center">
                        <button class="btn btn-success" type="submit"  style="width: 150px">submit
                        </button>
                    </div>
                         </form>
            </div>
        </div>
    </div>
<!-- feedback ajax script -->
<script>
        $(document).on('submit', '#feedback', function(e){
                e.preventDefault();
                $.ajax({
                    type:'POST',
                    url:'feedback',
                    data:{
                        name:$('#name').val(),
                        email:$('#F_email').val(),
                        feedback:$('#feedback_message').val(),
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                    },
                    success:function(){
                            alert(" Thanks for your feedback !! We will contact you ASAP! ");
                            
    
                    }
                });
        });
    
    </script>
    <script>
            
            var myInput = document.getElementById("psw");
            var myInput2 = document.getElementById("cpsw");
            var match = document.getElementById("match");
            var letter = document.getElementById("letter");
            var capital = document.getElementById("capital");
            var number = document.getElementById("number");
            var length = document.getElementById("length");
            
            
            // When the user clicks on the password field, show the message box
            
            myInput.onfocus = function() {
              document.getElementById("message").style.display = "block";
            }
            myInput2.onfocus = function() {
                document.getElementById("message2").style.display = "block";
              }
            
            // When the user clicks outside of the password field, hide the message box
            myInput.onblur = function() {
              document.getElementById("message").style.display = "none";
            }
            myInput2.onblur = function() {
                document.getElementById("message2").style.display = "none";
              }
            
            // When the user starts to type something inside the password field

            //for new password


            myInput.onkeyup = function() {
              // Validate lowercase letters
              var lowerCaseLetters = /[a-z]/g;
              if(myInput.value.match(lowerCaseLetters)) {  
                letter.classList.remove("invalid");
                letter.classList.add("valid");
              } else {
                letter.classList.remove("valid");
                letter.classList.add("invalid");
              }
              
              // Validate capital letters
              var upperCaseLetters = /[A-Z]/g;
              if(myInput.value.match(upperCaseLetters)) {  
                capital.classList.remove("invalid");
                capital.classList.add("valid");
              } else {
                capital.classList.remove("valid");
                capital.classList.add("invalid");
              }
            
              // Validate numbers
              var numbers = /[0-9]/g;
              if(myInput.value.match(numbers)) {  
                number.classList.remove("invalid");
                number.classList.add("valid");
              } else {
                number.classList.remove("valid");
                number.classList.add("invalid");
              }
              
              // Validate length
              if(myInput.value.length >= 8) {
                length.classList.remove("invalid");
                length.classList.add("valid");
              } else {
                length.classList.remove("valid");
                length.classList.add("invalid");
              }
            }
            
            
            //for confirm password


            myInput2.onkeyup = function() {
                // Validate lowercase letters
                var lowerCaseLetters = /[a-z]/g;
                if(myInput2.value.match(lowerCaseLetters)) {  
                  letter2.classList.remove("invalid");
                  letter2.classList.add("valid");
                } else {
                  letter2.classList.remove("valid");
                  letter2.classList.add("invalid");
                }
                
                // Validate capital letters
                var upperCaseLetters = /[A-Z]/g;
                if(myInput2.value.match(upperCaseLetters)) {  
                  capital2.classList.remove("invalid");
                  capital2.classList.add("valid");
                } else {
                  capital2.classList.remove("valid");
                  capital2.classList.add("invalid");
                }
              
                // Validate numbers
                var numbers = /[0-9]/g;
                if(myInput2.value.match(numbers)) {  
                  number2.classList.remove("invalid");
                  number2.classList.add("valid");
                } else {
                  number2.classList.remove("valid");
                  number2.classList.add("invalid");
                }
                
                // Validate length
                if(myInput2.value.length >= 8) {
                  length2.classList.remove("invalid");
                  length2.classList.add("valid");
                } else {
                  length2.classList.remove("valid");
                  length2.classList.add("invalid");
                }
              }
              if(myInput.value == myInput2.value){
                match.classList.add("match");

            }

              function password_match(){
                var npwd = document.getElementById("psw");
                var cpwd = document.getElementById("cpsw");
                if(npwd.value == cpwd.value){
                        return true;
                }
                else{
                    document.getElementById("match").style.display = "block";
                    return false;

                }

              }
            </script>
</body>
</html>